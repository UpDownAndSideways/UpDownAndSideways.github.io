<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jonathan Danner's Digital Card</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom CSS for smooth transition and interactivity */
        .floating-card {
            background-size: cover; 
            background-position: center; 
            /* Kept transition for smooth mouse movement, but removed hover styles */
            transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.2s ease-out;
            transform: perspective(1000px) rotateX(0deg) rotateY(0deg); /* Initial state */
        }
    </style>
</head>
<body class="font-sans">

    <!-- Main Container for the Website -->
    <div 
        id="main-container"
        class="min-h-screen flex flex-col items-center justify-center p-4"
        style="background: linear-gradient(to bottom right, #ffffff, #f0f0f0);"
    >
        
        <!-- The 3D Card Element -->
        <div 
            id="floating-card"
            class="
                floating-card 
                w-[90vw] max-w-sm h-60 md:h-72 
                rounded-2xl p-0
                cursor-pointer transform-gpu 
                shadow-xl 
                relative
                overflow-hidden
            "
            style="background-image: url('https://i.ibb.co/tTFTGSTy/envato-graphic-a54d1f6c-7ea2-47a2-bf5c-831509658566.png');"
            role="button"
            tabindex="0"
            aria-label="Click to download VCF contact file"
        >
        </div>
    </div>

    <!-- JavaScript Logic -->
    <script>
        const CONTACT_INFO = {
            name: "Jonathan Danner",
            title: "Brand Designer",
            company: "Jonathan Danner", // Added to ensure VCF completeness
            phone: "6827046494",
            email: "JDanner098@gmail.com",
            website: "https://www.jonathandanner.com"
        };
        
        const cardElement = document.getElementById('floating-card');
        const mainContainer = document.getElementById('main-container');

        /**
         * Generates the VCF content string from the contact data.
         * @returns {string} The VCF content.
         */
        function generateVcfContent() {
            const { name, title, company, phone, email, website } = CONTACT_INFO;
            
            // VCF 3.0 Standard Format
            return `BEGIN:VCARD
VERSION:3.0
FN:${name}
ORG:${company}
TITLE:${title}
TEL;TYPE=WORK,VOICE:${phone}
EMAIL;TYPE=PREF,INTERNET:${email}
URL:${website}
END:VCARD`;
        }

        /**
         * Handles the card click event and triggers the VCF file download.
         */
        function handleDownload() {
            const vcfContent = generateVcfContent();
            const blob = new Blob([vcfContent], { type: 'text/vcard;charset=utf-8' });
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `${CONTACT_INFO.name.replace(/\s/g, '_')}.vcf`;

            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            console.log(`VCF file for ${CONTACT_INFO.name} downloaded successfully.`);
        }

        /**
         * Handles mouse movement across the screen to calculate parallax rotation.
         */
        function handleMouseMove(e) {
            const { clientX, clientY } = e;
            const { innerWidth, innerHeight } = window;

            // Calculate position relative to the center of the viewport (from -0.5 to 0.5)
            const offsetX = (clientX - innerWidth / 2) / innerWidth;
            const offsetY = (clientY - innerHeight / 2) / innerHeight;

            // Map offset to rotation degree. Max rotation of 15 degrees.
            // Inverse rotation for parallax effect
            const maxRotation = 15;
            const rotY = -offsetX * maxRotation;
            const rotX = offsetY * maxRotation; 

            // Apply transformation directly to the element's style
            if (cardElement) {
                cardElement.style.transform = `perspective(1000px) rotateX(${rotX}deg) rotateY(${rotY}deg)`;
            }
        }

        /**
         * Resets the card's rotation when the mouse leaves the container.
         */
        function handleMouseLeave() {
            if (cardElement) {
                cardElement.style.transform = `perspective(1000px) rotateX(0deg) rotateY(0deg)`;
            }
        }

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            if (mainContainer) {
                // Attach event listeners for the parallax effect
                mainContainer.addEventListener('mousemove', handleMouseMove);
                mainContainer.addEventListener('mouseleave', handleMouseLeave);
            }

            if (cardElement) {
                // Attach event listener for the VCF download
                cardElement.addEventListener('click', handleDownload);
            }
        });
    </script>
</body>
</html>

